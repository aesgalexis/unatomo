:root {
  --cfg-maxw: 1125px; /* igual que el resto del sitio */
}

/* ====== Top bar fija (55px) ====== */
.cfg-topbar {
  position: fixed; inset: 0 0 auto 0; height: 55px;
  display: flex; align-items: center; gap: 14px;
  background: color-mix(in srgb, #fff 80%, transparent);
  -webkit-backdrop-filter: saturate(140%) blur(6px);
  backdrop-filter: saturate(140%) blur(6px);
  border-bottom: 1px solid color-mix(in srgb, #111 10%, transparent);
  z-index: 1000;
}
.cfg-topbar .inner {
  width: 100%; max-width: var(--cfg-maxw); margin: 0 auto;
  padding: 0 20px; display: flex; align-items: center; gap: 12px;
  justify-content: flex-start;
}
.cfg-brand { display: inline-flex; align-items: center; gap: 10px; text-decoration: none; color: inherit; }
.cfg-logo { width: 32px; height: 32px; opacity: .9; }
.cfg-title { font-size: 16px; font-weight: 600; letter-spacing: .2px; }

/* ====== Layout principal ====== */
body { background: #fff; }
.cfg-page { padding-top: 72px; padding-bottom: 48px; }
.cfg-container { width: 100%; max-width: var(--cfg-maxw); margin: 0 auto; padding: 0 20px; text-align: left; }

/* ====== Encabezado ====== */
.cfg-header { display: flex; align-items: baseline; justify-content: space-between; gap: 16px; margin: 8px 0 18px; }
.cfg-header h1 { font-size: clamp(26px, 4vw, 36px); margin: 0; letter-spacing: -.3px; }
.cfg-muted { color: color-mix(in srgb, currentColor 60%, transparent); font-size: 14px; }

/* ====== Tarjeta ====== */
.cfg-card {
  border: 1px solid color-mix(in srgb, currentColor 18%, transparent);
  border-radius: 12px; padding: 16px; background: #fff;
  box-shadow: 0 1px 0 color-mix(in srgb, #000 6%, transparent);
}

/* ====== Tabla adaptable (grid) ====== */
.cfg-grid { display: grid; grid-template-columns: 2.2fr .9fr .9fr .9fr; gap: 10px; align-items: center; }
.cfg-grid.header { font-weight: 600; font-size: 14px; opacity: .8; }
.cfg-grid + .cfg-grid { margin-top: 8px; }

/* ====== Familias ====== */
.cfg-family { margin-top: 18px; }
.cfg-family > .fam-title { font-weight: 700; margin: 10px 0 8px; font-size: 15px; color: #000; opacity: 1; }

/* ====== Celdas e inputs ====== */
.item-name { display: flex; align-items: center; gap: 8px; color: color-mix(in srgb, currentColor 60%, transparent); }
.item-sub { font-size: 12px; opacity: .75; }

.cfg-input {
  width: 100%; box-sizing: border-box; height: 38px; padding: 6px 10px;
  border-radius: 8px; border: 1px solid color-mix(in srgb, currentColor 18%, transparent);
  background: #fff; color: #111; font-size: 14px; color-scheme: light;
}
.cfg-input[readonly] { background: #fafafa; color: #333; }
.cfg-input:focus { outline: none; border-color: color-mix(in srgb, #111 40%, transparent); box-shadow: 0 0 0 2px color-mix(in srgb, #111 10%, transparent); }

/* Spinners sin fondo */
.cfg-input[type=number]::-webkit-inner-spin-button,
.cfg-input[type=number]::-webkit-outer-spin-button { background: transparent; margin: 0; }
/* Firefox */
.cfg-input[type=number] { -moz-appearance: textfield; }

.cfg-note { font-size: 12px; opacity: .7; margin-top: 4px; }

/* ====== Totales ====== */
.cfg-totals { display: grid; grid-template-columns: 1fr .6fr .6fr; gap: 10px; margin-top: 16px; align-items: center; }
.cfg-totals .sum { font-weight: 700; font-size: 16px; }
.cfg-totals label { display: grid; gap: 4px; font-size: 12px; opacity: .7; }

/* ====== Panel de ajustes (pesos) ====== */
details.cfg-weights { margin-top: 18px; }
details.cfg-weights > summary { cursor: pointer; list-style: none; }
details.cfg-weights > summary::-webkit-details-marker { display: none; }
.weights-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 10px; margin-top: 12px; }

/* ====== Breakdown porcentual (solo % kg) ====== */
.cfg-breakdown { 
  margin-top: 12px; 
  border-top: 1px dashed color-mix(in srgb, currentColor 20%, transparent); 
  padding-top: 12px;
}
.bd-title { font-size: 13px; opacity: .8; margin-bottom: 8px; }
/* -> 2 columnas: [Categoría] [Porcentaje kg] */
.bd-grid { display: grid; grid-template-columns: 1.6fr .7fr; gap: 10px; }
.bd-row { display: contents; }
.bd-row > div { padding: 6px 0; font-size: 14px; align-self: center; }
.bd-row > div:nth-child(1) { font-weight: 600; }
.bd-unit { opacity: .6; font-size: 12px; margin-left: 4px; }

@media (max-width: 620px) {
  .bd-grid { grid-template-columns: 1.4fr .8fr; }
}

/* ====== Estimador (plegable) ====== */
details.cfg-estimator { margin: 0 0 16px 0; }
details.cfg-estimator > summary { cursor: pointer; list-style: none; padding: 6px 0; font-weight: 600; }
details.cfg-estimator > summary::-webkit-details-marker { display: none; }
.est-body { margin-top: 8px; }

/* 4 columnas: Simples, Dobles, Suites, Cubiertos */
.est-grid {
  display: grid;
  grid-template-columns: repeat(4, minmax(0,1fr));
  gap: 10px;
  margin-top: 8px;
}
.est-field { display: grid; gap: 8px; font-size: 14px; }
.est-subfield { display: grid; gap: 6px; }
.est-subfield small { opacity: .75; line-height: 1; }

/* Botones */
.est-actions { display: flex; gap: 10px; margin-top: 12px; }
.btn-primary, .btn-ghost {
  height: 38px; padding: 0 12px; border-radius: 8px; border: 1px solid;
  background: #fff; cursor: pointer; font-weight: 600;
  border-color: color-mix(in srgb, currentColor 25%, transparent);
}
.btn-primary { background: color-mix(in srgb, #111 5%, #fff); }
.btn-primary:focus, .btn-ghost:focus { outline: none; box-shadow: 0 0 0 2px color-mix(in srgb, #111 12%, transparent); }
.btn-ghost { background: transparent; }
.cfg-estimator .btn-primary { color: #000; } /* contraste del texto */

/* Forzar legibilidad del botón "Aplicar estimación" */
#est-apply.btn-primary {
  color: #000 !important;            /* texto negro */
  background: #e6e6e6 !important;    /* gris estándar */
  border-color: #c8c8c8 !important;  /* borde gris */
}

#est-apply.btn-primary:hover { background: #d9d9d9 !important; }
#est-apply.btn-primary:active { background: #cfcfcf !important; }
#est-apply.btn-primary:focus { outline: none; box-shadow: 0 0 0 2px rgba(0,0,0,.12); }

/* Estimador: que los textos usen la misma fuente que la tabla */
.est-grid .est-field > span {
  font-family: inherit;  /* misma fuente que el sitio */
  font-weight: 600;
  font-size: 14px;
  opacity: .8;
  line-height: 1.2;
}
/* Botón "Limpiar todo" visible sobre fondo claro */
#est-clear.btn-ghost {
  color: #000 !important;           /* texto negro */
  background: transparent !important;
  border-color: #c8c8c8 !important; /* borde gris para que se vea */
}

#est-clear.btn-ghost:hover { background: #f6f6f6 !important; }
#est-clear.btn-ghost:active { background: #ededed !important; }
#est-clear.btn-ghost:focus  { outline: none; box-shadow: 0 0 0 2px rgba(0,0,0,.12); }

.cfg-input::placeholder { color: #bdbdbd; }
.cfg-input:focus::placeholder { color: transparent; }

/* Botón "Añadir artículo" visible */
#otros-add.btn-ghost {
  color: #000 !important;
  background: #fff !important;
  border-color: #c8c8c8 !important;
}
#otros-add.btn-ghost:hover { background: #f6f6f6 !important; }

/* Estado inválido para inputs (borde rojo) */
.cfg-input.is-invalid {
  border-color: #d14343 !important;
  box-shadow: 0 0 0 2px rgba(209,67,67,.12) !important;
}

/* Responsive estimador */
@media (max-width: 1100px) {
  .est-grid { grid-template-columns: repeat(2, minmax(0,1fr)); }
}
@media (max-width: 680px) {
  .est-grid { grid-template-columns: 1fr; }
}





/* ====== Maquinaria recomendada (solo lavado) ====== */
.cfg-card.cfg-machinery {
  /* Misma anchura visible que el resto de tarjetas dentro de .cfg-container */
  width: 100%;
  max-width: calc(var(--cfg-maxw) - 40px); /* 40px = padding 20+20 del contenedor */
  margin: 18px auto 0;
}


.cfg-machinery h2 {
  font-size: 18px;
  margin: 0 0 8px;
  letter-spacing: -.2px;
}

/* Marco interno: línea superior, sin “doble tarjeta” */
.mach-frame {
  margin-top: 10px;
  padding-top: 8px;
  border-top: 1px dashed color-mix(in srgb, currentColor 18%, transparent);
  background: transparent;
}

/* Controles de cálculo */
.mach-controls {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-bottom: 10px;
}

.mach-controls label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  font-size: 12px;
  opacity: .8;
  min-width: 180px;
}

.mach-add-btn,
.mach-adjust-btn {
  height: 38px;
  padding: 0 14px;
  font-size: 13px;
}

/* Botón verde (Añadir lavadora) */
.mach-add-btn {
  background: #2da44e !important;
  border-color: #2da44e !important;
  color: #fff !important;
}
.mach-add-btn:hover {
  background: #2c974b !important;
  border-color: #2c974b !important;
}
.mach-add-btn:active {
  background: #26863f !important;
  border-color: #26863f !important;
}

/* Botón blanco tipo "Añadir artículo" */
.mach-adjust-btn.btn-ghost {
  color: #000 !important;
  background: #fff !important;
  border-color: #c8c8c8 !important;
}
.mach-adjust-btn.btn-ghost:hover {
  background: #f6f6f6 !important;
}
.mach-adjust-btn.btn-ghost:active {
  background: #ededed !important;
}

/* Lista de lavadoras individuales */
.mach-list {
  margin-top: 8px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.mach-item {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  align-items: flex-start;
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid color-mix(in srgb, currentColor 14%, transparent);
  background: #fff;
}

.mach-item-header {
  flex: 0 0 auto;
  min-width: 160px;
  max-width: 220px;
}

.mach-label-small {
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: .04em;
  opacity: .6;
}

.mach-name-input {
  height: 34px;
  font-weight: 600;
  font-size: 14px;
}

.mach-item-fields {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  align-items: flex-end;
  flex: 1 1 auto;
}

.mach-item-fields label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  font-size: 12px;
  opacity: .8;
  min-width: 140px;
}

.mach-item-info {
  font-size: 11px;
}

.mach-item-info span {
  font-weight: 600;
}

/* Botón para quitar equipo, con color visible */
.mach-remove-btn {
  border: none;
  background: transparent;
  cursor: pointer;
  font-size: 12px;
  padding: 4px 6px;
  margin-left: auto;
  color: #333;              /* texto visible */
}
.mach-remove-btn:hover {
  opacity: 1;
  text-decoration: underline;
}

.mach-empty {
  font-size: 13px;
  opacity: .7;
  margin: 4px 0 0;
}

/* Tabla de maquinaria (usa misma grid base pero con 5 columnas) */
.mach-table {
  margin-top: 12px;
}

.mach-table .cfg-grid {
  grid-template-columns: 1.6fr .9fr .9fr 1.2fr .9fr;
}

.mach-table .mach-header {
  font-weight: 600;
  font-size: 13px;
  opacity: .8;
}

.mach-table .mach-row {
  margin-top: 6px;
  font-size: 14px;
}

.mach-label {
  font-weight: 600;
}

/* Cobertura destacada */
#mach-cover-total {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 70px;
  padding: 4px 12px;
  border-radius: 999px;
  border: 1px solid color-mix(in srgb, currentColor 30%, transparent);
  font-weight: 700;
  font-size: 14px;
}

#mach-cover-total.is-under {
  color: #d14343;
  border-color: #d14343;
  background: rgba(209, 67, 67, 0.06);
}

#mach-cover-total.is-over {
  color: #0c7a43;
  border-color: #0c7a43;
  background: rgba(12, 122, 67, 0.06);
}

.mach-legend {
  margin-top: 10px;
  font-size: 13px;
}

.mach-note {
  margin-top: 8px;
}

@media (max-width: 720px) {
  .mach-table .cfg-grid {
    grid-template-columns: 1.5fr .8fr .8fr 1.1fr .9fr;
  }

  .mach-item {
    flex-direction: column;
  }

  .mach-add-btn,
  .mach-adjust-btn {
    width: 100%;
  }
}

