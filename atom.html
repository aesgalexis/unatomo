<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Átomo — órbitas ampliadas y velocidades variadas</title>
<style>
html,body{height:100%;margin:0;background:#0b1020;color:#e5e7eb;font-family:system-ui,Segoe UI,Inter,Arial}
canvas{display:block;width:100%;height:100%}
.tip{position:fixed;left:12px;top:12px;font-size:12px;opacity:.85;background:rgba(17,24,39,.55);border:1px solid #263247;padding:8px 10px;border-radius:10px}
.hud{position:fixed;right:12px;top:12px;display:flex;gap:8px;align-items:center;background:rgba(17,24,39,.55);border:1px solid #263247;padding:8px 10px;border-radius:10px}
.hud input{width:64px;background:#0f172a;color:#e5e7eb;border:1px solid #334155;border-radius:8px;padding:6px 8px;font-size:13px}
.hud button{background:#18223a;color:#e5e7eb;border:1px solid #334155;border-radius:8px;padding:6px 10px;cursor:pointer;font-weight:600}
.hud button:hover{filter:brightness(1.06)}
</style>
</head>
<body>
<div class="tip">Izq: rotar átomo (inercia) · Der sobre anillo: mover esa órbita (inercia) · Rueda: zoom · R: reset · Z=protones</div>
<div class="hud">
<label>Z (protones): <input id="zInput" type="number" min="1" max="118" value="10"></label>
<button id="applyZ">Aplicar</button>
</div>


<script src="https://cdn.jsdelivr.net/npm/three@0.149.0/build/three.min.js"></script>
<script>
(function(){
// === Escena/cámara/renderer ===
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x0b1020);


const camera = new THREE.PerspectiveCamera(60, innerWidth/innerHeight, 0.1, 2000);
camera.position.set(0, 7, 20);


const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setPixelRatio(Math.min(devicePixelRatio||1, 2));
renderer.setSize(innerWidth, innerHeight);
document.body.appendChild(renderer.domElement);


// Luces
scene.add(new THREE.AmbientLight(0xffffff, 0.35));
const dir = new THREE.DirectionalLight(0xffffff, 1.0); dir.position.set(5,7,3); scene.add(dir);


// === Grupos ===
const atom = new THREE.Group(); // rotación global del átomo
scene.add(atom);


const nucleus = new THREE.Group(); // sólo protones (sin nada dentro)
atom.add(nucleus);


const glow = new THREE.PointLight(0x7dd3fc, 0.7, 50); nucleus.add(glow);


// Órbitas
const orbits = []; // {pivot, ring, holders[], angVel, electronBaseSpeed, precessSpeed, wobblePhase}


// === Materiales ===
const protonMat = new THREE.MeshPhongMaterial({ color: 0xff6b6b, emissive: 0x4d1a1a, emissiveIntensity: 0.35 });
const ringMat = new THREE.MeshBasicMaterial({ color: 0x8b5cf6, wireframe:true, transparent:true, opacity:0.35 });
const electronMat = new THREE.MeshPhongMaterial({ color: 0x22d3ee, emissive: 0x0ea5e9, emissiveIntensity: 0.85 });


// === Núcleo: cluster de Z protones ===
function setAtomicNumber(Z){
while(nucleus.children.length>1){ const obj = nucleus.children[1]; nucleus.remove(obj); obj.geometry?.dispose?.(); obj.material?.dispose?.(); }
const rp = 0.18; // radio protón
const R = 0.7 + Math.cbrt(Z)*0.27; // radio visual del núcleo
for(let i=0;i<Z;i++){
const p = new THREE.Mesh(new THREE.SphereGeometry(rp, 16, 16), protonMat.clone());
if(Z===1){ p.position.set(0,0,0); }
else {
const phi = Math.acos(1 - 2*(i+0.5)/Z);
const theta = Math.PI * (1 + Math.sqrt(5)) * (i+0.5);
const r = R * (0.85 + Math.random()*0.1);
p.position.set(r*Math.sin(phi)*Math.cos(theta), r*Math.cos(phi), r*Math.sin(phi)*Math.sin(theta));
}
nucleus.add(p);
}
}
</html>
