<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Configurador · unatomo</title>
  <meta name="robots" content="noindex, nofollow" />

  <link rel="stylesheet" href="/styles.css">
  <link rel="stylesheet" href="/static/css/configurador.css">
</head>

<body class="page page-configurador">
  <button id="theme-toggle" type="button" aria-label="Cambiar tema">
    ☾ / ☼
  </button>

  <header class="topbar">
    <div class="topbar-inner">
      <a href="/?setup=1" class="topbar-logo-link">
        <img
          src="/static/img/logo-unatomo-v1.5.svg"
          alt="unatomo"
          class="topbar-logo"
          loading="lazy"
        />
        <h2 class="topbar-title">Configurador</h2>
      </a>
    </div>
  </header>

  <main class="shell page-shell">
    <section class="page-section" aria-label="Configurador">
      <section class="card card--wide card-collapsible" id="estimator-card" data-collapsible>
        <div class="card-header">
          <h3>Estimador por habitaciones</h3>
          <button class="card-toggle" type="button" aria-expanded="true">Ocultar</button>
        </div>

        <div class="card-body" style="margin-top: 1rem;">
          <p>
            Introduce nº de habitaciones y factor de reposición. Al aplicar, se rellenan las unidades; los kilos se calculan solos.
          </p>

          <div class="form-grid form-grid--4">
            <div class="form-field">
              <label for="est-simples">Simples</label>
              <input id="est-simples" class="field" type="number" min="0" step="1" inputmode="numeric" placeholder="0">
              <label for="est-factor-s" style="margin-top:.5rem; display:block;">Factor reposición</label>
              <input id="est-factor-s" class="field" type="number" min="0" step="0.1" inputmode="decimal" value="1">
            </div>

            <div class="form-field">
              <label for="est-dobles">Dobles</label>
              <input id="est-dobles" class="field" type="number" min="0" step="1" inputmode="numeric" placeholder="0">
              <label for="est-factor-d" style="margin-top:.5rem; display:block;">Factor reposición</label>
              <input id="est-factor-d" class="field" type="number" min="0" step="0.1" inputmode="decimal" value="1">
            </div>

            <div class="form-field">
              <label for="est-suites">Suites</label>
              <input id="est-suites" class="field" type="number" min="0" step="1" inputmode="numeric" placeholder="0">
              <label for="est-factor-u" style="margin-top:.5rem; display:block;">Factor reposición</label>
              <input id="est-factor-u" class="field" type="number" min="0" step="0.1" inputmode="decimal" value="1">
            </div>

            <div class="form-field">
              <label for="est-cubiertos">Cubiertos</label>
              <input id="est-cubiertos" class="field" type="number" min="0" step="1" inputmode="numeric" placeholder="0">
              <label for="est-factor-cub" style="margin-top:.5rem; display:block;">Factor reposición</label>
              <input id="est-factor-cub" class="field" type="number" min="0" step="0.1" inputmode="decimal" value="1">
            </div>
          </div>

          <div class="form-actions" style="display:flex; justify-content:center; gap:.75rem; margin-top:1.25rem;">
            <button id="est-apply" class="scroll-top-button" type="button">Aplicar</button>
            <button id="est-clear" class="scroll-top-button" type="button">Limpiar</button>
          </div>
        </div>
      </section>
      <section class="card card--wide card-collapsible is-collapsed" id="table-card" data-collapsible>
        <div class="card-header">
          <h3>Tabla de kilos y unidades</h3>
          <button class="card-toggle" type="button" aria-expanded="false">Mostrar</button>
        </div>
        <div class="card-body">
          <p>
            Ajusta unidades o kilos y la otra columna se recalcula automáticamente. Puedes editar el peso por unidad.
          </p>

          <div class="cfg-grid header" role="row" style="margin-top: 1rem; display:grid; grid-template-columns: 2.2fr .9fr .9fr .9fr; gap:10px; align-items:center; font-weight:600;">
            <div>Artículo</div>
            <div>Unidades</div>
            <div>Kilos</div>
            <div>Peso/ud (kg)</div>
          </div>

          <div class="cfg-family" id="fam-sabanas" style="margin-top: 1rem;">
            <div style="font-weight:700; margin: 12px 0 8px;">Sábanas</div>

            <div class="cfg-grid" data-key="sabanas_s" role="row" style="display:grid; grid-template-columns: 2.2fr .9fr .9fr .9fr; gap:10px; align-items:center; margin-top:8px;">
              <div>Sábana · <span style="opacity:.8;">Individual</span></div>
              <input class="field" type="number" min="0" step="1" inputmode="numeric" placeholder="0" data-field="units" />
              <input class="field" type="number" min="0" step="0.01" inputmode="decimal" placeholder="0.00" data-field="kg" />
              <input class="field" type="number" min="0" step="0.01" inputmode="decimal" data-field="ppu" />
            </div>

            <div class="cfg-grid" data-key="sabanas_m" role="row" style="display:grid; grid-template-columns: 2.2fr .9fr .9fr .9fr; gap:10px; align-items:center; margin-top:8px;">
              <div>Sábana · <span style="opacity:.8;">Doble/Queen</span></div>
              <input class="field" type="number" min="0" step="1" inputmode="numeric" placeholder="0" data-field="units" />
              <input class="field" type="number" min="0" step="0.01" inputmode="decimal" placeholder="0.00" data-field="kg" />
              <input class="field" type="number" min="0" step="0.01" inputmode="decimal" data-field="ppu" />
            </div>

            <div class="cfg-grid" data-key="sabanas_l" role="row" style="display:grid; grid-template-columns: 2.2fr .9fr .9fr .9fr; gap:10px; align-items:center; margin-top:8px;">
              <div>Sábana · <span style="opacity:.8;">King</span></div>
              <input class="field" type="number" min="0" step="1" inputmode="numeric" placeholder="0" data-field="units" />
              <input class="field" type="number" min="0" step="0.01" inputmode="decimal" placeholder="0.00" data-field="kg" />
              <input class="field" type="number" min="0" step="0.01" inputmode="decimal" data-field="ppu" />
            </div>
          </div>

          <div class="cfg-family" id="fam-nordicos" style="margin-top: 1.25rem;">
            <div style="font-weight:700; margin: 12px 0 8px;">Nórdicos</div>

            <div class="cfg-grid" data-key="nordico_s" role="row" style="display:grid; grid-template-columns: 2.2fr .9fr .9fr .9fr; gap:10px; align-items:center; margin-top:8px;">
              <div>Nórdico · <span style="opacity:.8;">Individual</span></div>
              <input class="field" type="number" min="0" step="1" data-field="units" />
              <input class="field" type="number" min="0" step="0.01" data-field="kg" />
              <input class="field" type="number" min="0" step="0.01" data-field="ppu" />
            </div>

            <div class="cfg-grid" data-key="nordico_m" role="row" style="display:grid; grid-template-columns: 2.2fr .9fr .9fr .9fr; gap:10px; align-items:center; margin-top:8px;">
              <div>Nórdico · <span style="opacity:.8;">Doble/Queen</span></div>
              <input class="field" type="number" min="0" step="1" data-field="units" />
              <input class="field" type="number" min="0" step="0.01" data-field="kg" />
              <input class="field" type="number" min="0" step="0.01" data-field="ppu" />
            </div>

            <div class="cfg-grid" data-key="nordico_l" role="row" style="display:grid; grid-template-columns: 2.2fr .9fr .9fr .9fr; gap:10px; align-items:center; margin-top:8px;">
              <div>Nórdico · <span style="opacity:.8;">King</span></div>
              <input class="field" type="number" min="0" step="1" data-field="units" />
              <input class="field" type="number" min="0" step="0.01" data-field="kg" />
              <input class="field" type="number" min="0" step="0.01" data-field="ppu" />
            </div>
          </div>

          <div class="cfg-family" id="fam-fundas" style="margin-top: 1.25rem;">
            <div style="font-weight:700; margin: 12px 0 8px;">Fundas de almohada</div>

            <div class="cfg-grid" data-key="fundas_std" role="row" style="display:grid; grid-template-columns: 2.2fr .9fr .9fr .9fr; gap:10px; align-items:center; margin-top:8px;">
              <div>Funda de almohada</div>
              <input class="field" type="number" min="0" step="1" data-field="units" />
              <input class="field" type="number" min="0" step="0.01" data-field="kg" />
              <input class="field" type="number" min="0" step="0.01" data-field="ppu" />
            </div>
          </div>

          <div class="cfg-family" id="fam-toallas" style="margin-top: 1.25rem;">
            <div style="font-weight:700; margin: 12px 0 8px;">Toallas</div>

            <div class="cfg-grid" data-key="toalla_alfombrin" role="row" style="display:grid; grid-template-columns: 2.2fr .9fr .9fr .9fr; gap:10px; align-items:center; margin-top:8px;">
              <div>Alfombrín</div>
              <input class="field" type="number" min="0" step="1" data-field="units" />
              <input class="field" type="number" min="0" step="0.01" data-field="kg" />
              <input class="field" type="number" min="0" step="0.01" data-field="ppu" />
            </div>

            <div class="cfg-grid" data-key="toalla_manos" role="row" style="display:grid; grid-template-columns: 2.2fr .9fr .9fr .9fr; gap:10px; align-items:center; margin-top:8px;">
              <div>Toalla de manos</div>
              <input class="field" type="number" min="0" step="1" data-field="units" />
              <input class="field" type="number" min="0" step="0.01" data-field="kg" />
              <input class="field" type="number" min="0" step="0.01" data-field="ppu" />
            </div>

            <div class="cfg-grid" data-key="toalla_bano" role="row" style="display:grid; grid-template-columns: 2.2fr .9fr .9fr .9fr; gap:10px; align-items:center; margin-top:8px;">
              <div>Toalla de baño</div>
              <input class="field" type="number" min="0" step="1" data-field="units" />
              <input class="field" type="number" min="0" step="0.01" data-field="kg" />
              <input class="field" type="number" min="0" step="0.01" data-field="ppu" />
            </div>

            <div class="cfg-grid" data-key="toalla_piscina" role="row" style="display:grid; grid-template-columns: 2.2fr .9fr .9fr .9fr; gap:10px; align-items:center; margin-top:8px;">
              <div>Toalla de piscina</div>
              <input class="field" type="number" min="0" step="1" data-field="units" />
              <input class="field" type="number" min="0" step="0.01" data-field="kg" />
              <input class="field" type="number" min="0" step="0.01" data-field="ppu" />
            </div>
          </div>

          <div class="cfg-family" id="fam-albornoces" style="margin-top: 1.25rem;">
            <div style="font-weight:700; margin: 12px 0 8px;">Albornoces</div>

            <div class="cfg-grid" data-key="albornoz" role="row" style="display:grid; grid-template-columns: 2.2fr .9fr .9fr .9fr; gap:10px; align-items:center; margin-top:8px;">
              <div>Albornoz</div>
              <input class="field" type="number" min="0" step="1" data-field="units" />
              <input class="field" type="number" min="0" step="0.01" data-field="kg" />
              <input class="field" type="number" min="0" step="0.01" data-field="ppu" />
            </div>
          </div>

          <div class="cfg-family" id="fam-manteleria" style="margin-top: 1.25rem;">
            <div style="font-weight:700; margin: 12px 0 8px;">Mantelería y servilletas</div>

            <div class="cfg-grid" data-key="mantel" role="row" style="display:grid; grid-template-columns: 2.2fr .9fr .9fr .9fr; gap:10px; align-items:center; margin-top:8px;">
              <div>Mantel</div>
              <input class="field" type="number" min="0" step="1" data-field="units" />
              <input class="field" type="number" min="0" step="0.01" data-field="kg" />
              <input class="field" type="number" min="0" step="0.01" data-field="ppu" />
            </div>

            <div class="cfg-grid" data-key="servilleta" role="row" style="display:grid; grid-template-columns: 2.2fr .9fr .9fr .9fr; gap:10px; align-items:center; margin-top:8px;">
              <div>Servilleta</div>
              <input class="field" type="number" min="0" step="1" data-field="units" />
              <input class="field" type="number" min="0" step="0.01" data-field="kg" />
              <input class="field" type="number" min="0" step="0.01" data-field="ppu" />
            </div>
          </div>

          <div class="cfg-family" id="fam-otros" style="margin-top: 1.25rem;">
            <div style="font-weight:700; margin: 12px 0 8px;">Otros</div>
            <div id="otros-rows"></div>

            <div class="form-actions" style="display:flex; justify-content:center; margin-top:1rem;">
              <button id="otros-add" type="button" class="scroll-top-button">Añadir artículo</button>
            </div>
          </div>

          <div class="cfg-totals" aria-live="polite" style="margin-top:1.5rem;">
            <h4>Total</h4>
            <div class="form-grid">
              <div class="form-field">
                <label for="total-units">Unidades (uds)</label>
                <input class="field" id="total-units" type="number" readonly />
              </div>
              <div class="form-field">
                <label for="total-kg">Kilos (kg)</label>
                <input class="field" id="total-kg" type="number" readonly />
              </div>
            </div>
          </div>

          <div class="cfg-breakdown" aria-live="polite" style="margin-top:1.25rem;">
            <h4>Porcentaje por categoría</h4>
            <ul style="margin:0; padding-left:0; list-style:none;">
              <li>Ropa de cama: <output id="pct-cama-kg">0%</output></li>
              <li>Rizo: <output id="pct-rizo-kg">0%</output></li>
              <li>Mantelería: <output id="pct-mant-kg">0%</output></li>
            </ul>
            <input id="total-kg-rizo" type="number" readonly hidden />
          </div>
        </div>
      </section>
      <section class="card card--wide" id="workday-card">
        <h3>Duración jornada de trabajo</h3>
        <div class="form-grid" style="margin-top:1rem;">
          <div class="form-field">
            <label for="work-hours">Jornada</label>
            <select id="work-hours" class="field"></select>
          </div>
        </div>
      </section>

      <section class="card card--wide card-collapsible" id="mach-card" data-collapsible>
        <div class="card-header">
          <h3>Equipos estimados para lavado</h3>
          <button class="card-toggle" type="button" aria-expanded="true">Ocultar</button>
        </div>
        <div class="card-body" style="margin-top:1rem;">
          <div class="form-grid">
            <div class="form-field">
              <label for="mach-mode">Modo</label>
              <select id="mach-mode" class="field">
                <option value="auto" selected>Automático</option>
                <option value="fixed">Fijo</option>
              </select>
            </div>

            <div class="form-field" id="mach-fixed-wrapper" style="display:none;">
              <label for="mach-fixed-cap">Capacidad fija</label>
              <select id="mach-fixed-cap" class="field"></select>
            </div>
          </div>

          <div class="form-actions" style="display:flex; justify-content:center; gap:.75rem; margin-top:1.25rem;">
            <button id="mach-adjust" class="scroll-top-button" type="button">Actualizar</button>
            <button id="mach-add" class="scroll-top-button" type="button">Añadir equipo</button>
          </div>

          <div id="mach-list" style="margin-top:1rem;"></div>

          <div style="margin-top:1.5rem;">
            <p>Kilos/día: <strong><output id="mach-kg-total">0</output></strong></p>
            <p>Total equipos: <strong><output id="mach-machines-total">0</output></strong></p>
            <p>Capacidad total: <strong><output id="mach-cap-total">0</output></strong> kg/día</p>
            <p>Cobertura: <strong><output id="mach-cover-total">0%</output></strong></p>
          </div>

          <p id="mach-legend" style="margin-top:1rem; opacity:.8;">
            Introduce kilos para ver la maquinaria recomendada.
          </p>
        </div>
      </section>

      <section class="card card--wide card-collapsible" id="dry-card" data-collapsible>
        <div class="card-header">
          <h3>Equipos estimados para el secado</h3>
          <button class="card-toggle" type="button" aria-expanded="true">Ocultar</button>
        </div>
        <div class="card-body" style="margin-top:1rem;">
          <div class="form-grid">
            <div class="form-field">
              <label for="dry-mode">Modo</label>
              <select id="dry-mode" class="field">
                <option value="auto" selected>Automático</option>
                <option value="fixed">Fijo</option>
              </select>
            </div>

            <div class="form-field" id="dry-fixed-wrapper" style="display:none;">
              <label for="dry-fixed-cap">Capacidad fija</label>
              <select id="dry-fixed-cap" class="field"></select>
            </div>
          </div>

          <div class="form-actions" style="display:flex; justify-content:center; gap:.75rem; margin-top:1.25rem;">
            <button id="dry-adjust" class="scroll-top-button" type="button">Actualizar</button>
            <button id="dry-add" class="scroll-top-button" type="button">Añadir equipo</button>
          </div>

          <div id="dry-list" style="margin-top:1rem;"></div>

          <div style="margin-top:1.5rem;">
            <p>Kilos/día: <strong><output id="dry-kg-total">0</output></strong></p>
            <p>Total equipos: <strong><output id="dry-machines-total">0</output></strong></p>
            <p>Capacidad total: <strong><output id="dry-cap-total">0</output></strong> kg/día</p>
            <p>Cobertura: <strong><output id="dry-cover-total">0%</output></strong></p>
          </div>

          <p id="dry-legend" style="margin-top:1rem; opacity:.8;">
            Introduce kilos de rizo para ver la maquinaria recomendada.
          </p>
        </div>
      </section>

      <section class="card card--wide" id="export-card">
        <h3>Exportar</h3>
        <p>Genera un PDF con la información actual del configurador.</p>
        <div class="form-actions" style="display:flex; justify-content:center; gap:.75rem; margin-top:1.25rem;">
          <button id="export-pdf" class="scroll-top-button" type="button">Exportar PDF</button>
        </div>
      </section>

    </section>

    <div class="scroll-top-container">
      <button id="back-button" class="scroll-top-button" type="button" onclick="window.location.href='/es/index.html'">
        Atrás
      </button>
      <button id="scroll-top-button" class="scroll-top-button" type="button">
        Arriba
      </button>
    </div>

    <div id="legal-footer" class="legal-footer"></div>

    <div class="footer-link">
      <a href="/es/privacidad.html">Política de privacidad y cookies</a>
    </div>
  </main>

  <script type="module" src="/static/js/theme/theme.js"></script>
  <script src="/static/js/unatomo-entry.js"></script>
  <script src="/static/js/functions.js"></script>
  <script src="/static/js/footer.js"></script>

  <script src="/apps/configurador/configurador.js"></script>
  <script src="/apps/configurador/calc_maquinaria.js"></script>
  <script src="/apps/configurador/export.js"></script>
</body>
</html>
