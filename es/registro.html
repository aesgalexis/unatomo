<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Registro · unatomo</title>
  <meta name="description" content="Registro en unatomo." />
  <meta name="robots" content="noindex, nofollow" />

  <link rel="stylesheet" href="/styles.css">
</head>

<body class="page">
  <button id="theme-toggle" type="button" aria-label="Cambiar tema">
    ☾ / ☼
  </button>

  <header class="topbar">
    <div class="topbar-inner">
      <a href="/?setup=1" class="topbar-logo-link">
        <img
          src="/static/img/logo-unatomo-v1.5.svg"
          alt="unatomo"
          class="topbar-logo"
          loading="lazy"
        />
        <h2 class="topbar-title">Registro</h2>
      </a>
    </div>
  </header>

  <main class="shell page-shell">
    <section class="page-section" aria-label="Registro">
      <section class="card card--wide" aria-label="Formulario de registro">
        <h3>Crear cuenta</h3>
        <p>
          Introduce tus datos para crear una cuenta.
        </p>

        <form id="register-form" class="contact-form" novalidate>
          <div class="form-grid">
            <div class="form-field form-field--full">
              <label for="codigo">Código<span aria-hidden="true"> *</span></label>
              <input id="codigo" name="codigo" type="text" required class="field" autocomplete="one-time-code" />
            </div>

            <div class="form-field">
              <label for="nombre">Nombre<span aria-hidden="true"> *</span></label>
              <input id="nombre" name="nombre" type="text" required class="field" autocomplete="name" />
            </div>

            <div class="form-field">
              <label for="empresa">Empresa</label>
              <input id="empresa" name="empresa" type="text" class="field" autocomplete="organization" />
            </div>

            <div class="form-field">
              <label for="email">Correo electrónico<span aria-hidden="true"> *</span></label>
              <input id="email" name="email" type="email" required class="field" autocomplete="email" />
            </div>

            <div class="form-field">
              <label for="telefono">Teléfono</label>
              <input id="telefono" name="telefono" type="tel" class="field" autocomplete="tel" inputmode="tel" />
            </div>

            <div class="form-field">
              <label for="password">Contraseña<span aria-hidden="true"> *</span></label>
              <input id="password" name="password" type="password" required class="field" autocomplete="new-password" />
            </div>

            <div class="form-field">
              <label for="password2">Repetir contraseña<span aria-hidden="true"> *</span></label>
              <input id="password2" name="password2" type="password" required class="field" autocomplete="new-password" />
            </div>

            <div class="form-field form-field--full">
              <label for="acepto">
                <input id="acepto" name="acepto" type="checkbox" required>
                Acepto la <a href="/es/privacidad.html">política de privacidad</a>
              </label>
            </div>
          </div>

          <p class="form-status" role="status" aria-live="polite" hidden></p>

          <div class="form-actions" style="display:flex; justify-content:center; gap:0.75rem; flex-wrap:wrap;">
            <a class="btn-secondary" href="/auth/request-code.html">Solicitar código</a>
            <button type="submit" class="btn-primary">Crear cuenta</button>
          </div>
        </form>
      </section>

      <div class="scroll-top-container">
        <button id="back-button" class="scroll-top-button" type="button" onclick="window.location.href='/?setup=1'">
          Volver
        </button>
        <button id="scroll-top-button" class="scroll-top-button" type="button">
          Arriba
        </button>
      </div>
    </section>

    <div id="legal-footer" class="legal-footer"></div>

    <div class="footer-link">
      <a href="/es/privacidad.html">Política de privacidad y cookies</a>
    </div>
  </main>

  <script src="/static/js/theme.js"></script>
  <script src="/static/js/functions.js"></script>
  <script src="/static/js/footer.js"></script>

<script type="module">
  import { validateRegistrationCode } from "/static/js/registro/firebase-init.js";

  const code = (sessionStorage.getItem("unatomo_access_code") || "").trim();

  if (!code) {
    window.location.replace("/?setup=1");
  } else {
    try {
      const res = await validateRegistrationCode(code);
      if (!res.valid) {
        try { sessionStorage.removeItem("unatomo_access_code"); } catch (e) {}
        window.location.replace("/?setup=1");
      } else {
        document.documentElement.style.visibility = "visible";
      }
    } catch (e) {
      window.location.replace("/?setup=1");
    }
  }
</script>

  
</body>
</html>
